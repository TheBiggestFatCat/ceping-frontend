"use strict";const e=require("../../common/vendor.js");if(!Array){e.resolveComponent("uni-icons")()}Math;const t={__name:"applydetail",setup(t){const s=e.reactive({apply:[],selected:1,role:getApp().globalData.role}),a=(t,s)=>{e.index.request({url:"http://127.0.0.1:3000/shenqing/xiugaistatus?shenqingId="+t+"&shenqingStatus="+s,success(e){o()}})},o=()=>{e.index.request({url:"http://127.0.0.1:3000/shenqing/oneshenqinggood?goodProducterId="+getApp().globalData.userid,success(t){s.apply=t.data.data;for(let a of s.apply)e.index.request({url:"http://127.0.0.1:3000/user/selectuser?userId="+a.shenqingUserId,success(e){a.username=e.data.data[0].username,console.log(a.shenqingStatus)}}),e.index.request({url:"http://127.0.0.1:3000/good/getgoodbyid?goodId="+a.shenqingGoodId,success(e){a.goodName=e.data.data[0].goodName,a.picture=e.data.data[0].goodPicture.split(",")[0]}})}})};return e.onShow((()=>{2==getApp().globalData.role&&o(),3==getApp().globalData.role&&(s.selected=2,e.index.request({url:"http://127.0.0.1:3000/shenqing/getshenqingbyuser?shenqingUserId="+getApp().globalData.userid,success(t){console.log(t),s.apply=t.data.data;for(let a of s.apply)e.index.request({url:"http://127.0.0.1:3000/good/getgoodbyid?goodId="+a.shenqingGoodId,success(e){a.goodName=e.data.data[0].goodName,a.picture=e.data.data[0].goodPicture.split(",")[0]}})}}))})),(t,o)=>e.e({a:e.p({color:1==s.selected?"blue":"",type:"more-filled",size:"24"}),b:e.n(1==s.selected?"blue":""),c:e.n(1==s.selected?"selected-tabbar-box tabbar-box":"tabbar-box"),d:e.o((e=>s.selected=1)),e:e.p({color:2==s.selected?"blue":"",type:"checkmarkempty",size:"24"}),f:e.n(2==s.selected?"blue":""),g:e.n(2==s.selected?"selected-tabbar-box tabbar-box":"tabbar-box"),h:e.o((e=>s.selected=2)),i:e.p({color:3==s.selected?"blue":"",type:"closeempty",size:"24"}),j:e.n(3==s.selected?"blue":""),k:e.n(3==s.selected?"selected-tabbar-box tabbar-box":"tabbar-box"),l:e.o((e=>s.selected=3)),m:e.n(1==s.selected?"linetype1":2==s.selected?"linetype2":"linetype3"),n:2==s.role},2==s.role?{o:e.f(s.apply,((t,o,n)=>e.e({a:e.t(t.username),b:e.t(t.goodName),c:e.t(t.date),d:1==t.shenqingStatus},1==t.shenqingStatus?{e:e.o((e=>a(t.shenqingId,2)),o)}:{},{f:1==t.shenqingStatus},1==t.shenqingStatus?{g:e.o((e=>a(t.shenqingId,3)),o)}:{},{h:t.picture,i:o,j:s.selected==t.shenqingStatus,k:o})))}:{},{p:3==s.role},3==s.role?{q:e.f(s.apply,((t,a,o)=>e.e({a:e.t(t.goodName),b:e.t(t.date),c:2==t.shenqingStatus},2==t.shenqingStatus?{d:"375055b4-3-"+o,e:e.p({type:"right",size:"12",color:"#fff"}),f:e.o((s=>{return a=t.shenqingGoodId,o=t.shenqingId,void e.index.navigateTo({url:"/pages/ceping/ceping?shenqingGoodId="+a+"&shenqingId="+o});var a,o}),a)}:{},{g:t.picture,h:a,i:s.selected==t.shenqingStatus,j:a})))}:{})}};wx.createPage(t);
