"use strict";const o=require("../../common/vendor.js"),e=require("../../common/assets.js");if(!Array){o.resolveComponent("uni-icons")()}Math;const d={__name:"home3",setup(d){const t=o.reactive({goods:[],randGoods:[],role:getApp().globalData.role}),a=()=>{o.index.navigateTo({url:"/pages/publish/publish"})};o.onShow((()=>{2==getApp().globalData.role&&o.index.request({url:"http://127.0.0.1:3000/good/getgoodbyuserid?goodProducterId="+getApp().globalData.userid,success(o){for(let e of o.data.data)e.goodPicture=e.goodPicture.split(",");t.goods=o.data.data}}),3==getApp().globalData.role&&o.index.request({url:"http://127.0.0.1:3000/good/getrandgood",success(o){if(0==o.data.status){for(let e of o.data.data)e.goodPicture=e.goodPicture.split(","),e.goodDate=e.goodDate.slice(0,10);t.randGoods=o.data.data}}})}));const g=()=>{o.index.navigateTo({url:"/pages/publish/publish"})},s=e=>{o.index.request({url:"http://127.0.0.1:3000/shenqing/addshenqing",method:"POST",data:{shenqingUserId:getApp().globalData.userid,shenqingGoodId:e},header:{"Content-Type":"application/x-www-form-urlencoded"},success(o){console.log(o)}})},r=e=>{o.index.navigateTo({url:"/pages/good/good?goodid="+e})};return(d,i)=>o.e({a:3==t.role},3==t.role?{b:o.p({type:"hand-up-filled",size:"24",color:"#ffb218"}),c:o.f(t.randGoods,((e,d,t)=>({a:e.goodPicture[0],b:o.t(e.goodName),c:o.t(e.goodPrice),d:o.t(e.goodDate),e:o.o((o=>s(e.goodId)),d),f:d,g:o.o((o=>r(e.goodId)),d)}))),d:o.p({type:"fire-filled",size:"24",color:"#ff440c"}),e:o.f(t.randGoods,((e,d,t)=>({a:e.goodPicture[0],b:o.t(e.goodName),c:o.t(e.goodPrice),d:o.t(e.goodDate),e:o.o((o=>s(e.goodId)),d),f:d,g:o.o((o=>r(e.goodId)),d)})))}:{},{f:2==t.role},2==t.role?o.e({g:0==t.goods.length},0==t.goods.length?{h:e._imports_0,i:o.o(a)}:{},{j:o.p({type:"compose",size:"20"}),k:o.p({type:"right",size:"18"}),l:o.o(g),m:o.f(t.goods,((e,d,t)=>({a:e.goodPicture[0],b:o.t(e.goodName),c:o.t(e.goodPrice),d:o.o((o=>r(e.goodId)),d),e:d})))}):{})}};wx.createPage(d);
